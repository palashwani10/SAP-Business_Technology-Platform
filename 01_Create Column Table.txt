CONNECT SALE_ADMIN PASSWORD Password1;
SET SCHEMA SALES;

CREATE COLUMN TABLE HOTEL(
    hno INTEGER PRIMARY KEY,
    name NVARCHAR(50) NOT NULL,
    address NVARCHAR(40) NOT NULL,
    city NVARCHAR(30) NOT NULL,
    state NVARCHAR(2) NOT NULL,
    zip NVARCHAR(6),
    location ST_Point(4326)
);

CREATE COLUMN TABLE ROOM(
    hno INTEGER,
    type NVARCHAR(6),
    free NUMERIC(3),
    price NUMERIC(6, 2),
    PRIMARY KEY (hno, type),
    FOREIGN KEY (hno) REFERENCES HOTEL
);

CREATE COLUMN TABLE CUSTOMER(
    cno INTEGER PRIMARY KEY,
    title NVARCHAR(7),
    firstname NVARCHAR(20),
    name NVARCHAR(40) NOT NULL,
    address NVARCHAR(40) NOT NULL,
    zip NVARCHAR(6)
);

CREATE COLUMN TABLE RESERVATION(
    resno INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    rno INTEGER NOT NULL,
    cno INTEGER,
    hno INTEGER,
    type NVARCHAR(6),
    arrival DATE NOT NULL,
    departure DATE NOT NULL,
    PRIMARY KEY (
        "RESNO", "ARRIVAL"
    ),
    FOREIGN KEY(cno) REFERENCES CUSTOMER,
    FOREIGN KEY(hno) REFERENCES HOTEL
);

CREATE COLUMN TABLE MAINTENANCE(
    mno INTEGER PRIMARY KEY,
    hno INTEGER,
    description NVARCHAR(100),
    date_performed DATE,
    performed_by NVARCHAR(40)
);